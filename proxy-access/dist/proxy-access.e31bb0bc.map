{"version":3,"sources":["member.js","membersDB.js","memberService.js","proxy.js","index.js"],"names":["Member","userId","password","membersDB","MemberService","member","filterMember","filter","m","length","memberId","console","log","undefined","push","map","val","index","splice","authFlag","handler","get","target","propKey","receiver","targetValue","Reflect","checkLogin","args","apply","admin","guest","another","adminUser","Proxy","guestUser","anotherUser","isLogin","checkID","checkPassword","addMember"],"mappings":"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","file":"proxy-access.e31bb0bc.map","sourceRoot":"..","sourcesContent":["export class Member {\r\n  constructor(userId, password) {\r\n    this.userId = userId;\r\n    this.password = password;\r\n  }\r\n}\r\n","export let membersDB = [\r\n  { userId: 'admin', password: '1234' },\r\n  { userId: 'guest', password: '0000' }\r\n];\r\n","import { Member } from './member';\r\nimport { membersDB } from './membersDB';\r\n\r\nexport class MemberService {\r\n  constructor(member) {\r\n    this.userId = member.userId;\r\n    this.password = member.password;\r\n  }\r\n  checkLogin(member) {\r\n    const filterMember = membersDB.filter(\r\n      m => m.userId == member.userId && m.password == member.password\r\n    );\r\n    if (filterMember.length !== 0) {\r\n      return filterMember[0].userId === 'admin' ? 'admin' : 'guest';\r\n    } else return false;\r\n  }\r\n  checkID(memberId) {\r\n    console.log('----- 아이디 체크 -----');\r\n    console.log('입력한 ID > ' + memberId);\r\n    const filterMember = membersDB.filter(m => m.userId == memberId);\r\n    if (filterMember[0] === undefined) {\r\n      console.log('아이디가 존재하지 않습니다.');\r\n    } else {\r\n      console.log('아이디가 존재합니다.');\r\n      return filterMember[0].userId;\r\n    }\r\n  }\r\n  checkPassword(memberId) {\r\n    console.log('----- 비밀번호 체크 -----');\r\n    console.log('입력한 ID > ' + memberId);\r\n    console.log('비밀번호는 아래와 같습니다.');\r\n    const filterMember = membersDB.filter(m => m.userId == memberId);\r\n    return filterMember[0].password;\r\n  }\r\n  addMember(memberId) {\r\n    membersDB.push({ userId: memberId, password: '0000' });\r\n  }\r\n  delMember(member) {\r\n    console.log('delMember');\r\n    if (member.password === undefined) {\r\n      membersDB.map((val, index) => {\r\n        if (val.userId === member.userId) {\r\n          console.log(index);\r\n          membersDB.splice(index, 1);\r\n        }\r\n      });\r\n    }\r\n  }\r\n  editMember(member) {\r\n    console.log('edit');\r\n  }\r\n}\r\n","var authFlag = '';\r\n\r\nexport let handler = {\r\n  get: function(target, propKey, receiver) {\r\n    const targetValue = Reflect.get(target, propKey, receiver);\r\n    authFlag = target.checkLogin(target);\r\n    if (typeof targetValue === 'function') {\r\n      if (\r\n        !authFlag ||\r\n        (authFlag === 'guest' &&\r\n          (propKey === 'addMember' || propKey === 'delMember'))\r\n      ) {\r\n        return function(...args) {\r\n          console.log('CALL', propKey, args);\r\n          console.log('※ 접근할 수 있는 권한이 없습니다.');\r\n        };\r\n      } else {\r\n        return function(...args) {\r\n          console.log('CALL', propKey, args);\r\n          return targetValue.apply(this, args);\r\n        };\r\n      }\r\n    } else {\r\n      authFlag = target.checkLogin(target);\r\n      if (authFlag) console.log('----- 로그인 성공 -----');\r\n      else console.log('----- 로그인 실패-----');\r\n      return authFlag;\r\n    }\r\n  }\r\n};\r\n","import { MemberService } from './memberService';\r\nimport { membersDB } from './membersDB';\r\nimport { handler } from './proxy';\r\n\r\nlet admin = new MemberService({ userId: 'admin', password: '1234' });\r\nlet guest = new MemberService({ userId: 'guest', password: '0000' });\r\nlet another = new MemberService({ userId: 'someone', password: '9999' });\r\n\r\nlet adminUser = new Proxy(admin, handler);\r\nlet guestUser = new Proxy(guest, handler);\r\nlet anotherUser = new Proxy(another, handler);\r\n\r\n// adminUser .연산자를 사용할 때만 'get' trap call...\r\nadminUser.isLogin;\r\nadminUser.checkID('admin');\r\nconsole.log('> ' + adminUser.checkPassword('admin'));\r\n\r\nconsole.log('----- 멤버 추가 -----');\r\nadminUser.addMember('jieun');\r\n\r\nmembersDB.map(val => {\r\n  console.log(val);\r\n});\r\n"]}